# ğŸ‰ Agentæ…¢ç—…ç®¡ç†çŸ¥è¯†åº“ åˆ›å»ºå®Œæˆï¼

## âœ… é¡¹ç›®çŠ¶æ€ï¼š100% å®Œæˆ

### ğŸ“¦ å·²äº¤ä»˜ç»„ä»¶

#### 1. **æ ¸å¿ƒæ•°æ®æ¨¡å‹** âœ…
- âœ… æ‚£è€…æ¨¡å‹ï¼ˆPatientï¼‰ï¼šä¸ªäººä¿¡æ¯ã€ç—…å²ã€è¿‡æ•ã€ç”¨è¯
- âœ… ç–¾ç—…æ¨¡å‹ï¼ˆDiseaseï¼‰ï¼šåˆ†ç±»ã€ç—‡çŠ¶ã€æ²»ç–—æ–¹æ¡ˆ
- âœ… æ²»ç–—æ¨¡å‹ï¼ˆTreatmentï¼‰ï¼šè¯ç‰©ã€ç”Ÿæ´»æ–¹å¼ã€ç›‘æµ‹
- âœ… å¥åº·æŒ‡æ ‡æ¨¡å‹ï¼ˆHealthMetricï¼‰ï¼šè¡€å‹ã€è¡€ç³–ã€ä½“é‡ç­‰
- âœ… æŸ¥è¯¢æ¨¡å‹ï¼ˆQueryï¼‰ï¼šè¯·æ±‚å’Œå“åº”ç»“æ„

#### 2. **çŸ¥è¯†åº“ç³»ç»Ÿ** âœ…
- âœ… å‘é‡æ•°æ®åº“ï¼ˆChromaDBï¼‰ï¼šè¯­ä¹‰æœç´¢ã€æ–‡æ¡£å­˜å‚¨
- âœ… æ–‡æ¡£åˆ†å—å™¨ï¼šæ™ºèƒ½æ–‡æœ¬åˆ†å‰²
- âœ… RAGæ£€ç´¢ï¼šåŸºäºåµŒå…¥çš„è¯­ä¹‰æœç´¢
- âœ… CRUDæ“ä½œï¼šå®Œæ•´çš„çŸ¥è¯†åº“ç®¡ç†

#### 3. **Agentç³»ç»Ÿ** âœ…
- âœ… **QueryAgent**ï¼šç†è§£æŸ¥è¯¢æ„å›¾ã€æå–å®ä½“
- âœ… **RetrievalAgent**ï¼šRAGæ£€ç´¢ã€ç­”æ¡ˆç”Ÿæˆ
- âœ… **RecommendationAgent**ï¼šä¸ªæ€§åŒ–å¥åº·å»ºè®®
- âœ… **AgentOrchestrator**ï¼šæ™ºèƒ½ä½“åè°ƒå’Œç¼–æ’

#### 4. **RESTful API** âœ…
- âœ… `/health` - å¥åº·æ£€æŸ¥
- âœ… `/api/v1/knowledge/*` - çŸ¥è¯†åº“ç®¡ç†
- âœ… `/api/v1/patients/*` - æ‚£è€…ç®¡ç†
- âœ… `/api/v1/query` - æ™ºèƒ½æŸ¥è¯¢
- âœ… `/api/v1/recommendations` - ä¸ªæ€§åŒ–å»ºè®®

#### 5. **ç¤ºä¾‹æ•°æ®** âœ…
- âœ… 2å‹ç³–å°¿ç—…çŸ¥è¯†åº“
- âœ… é«˜è¡€å‹çŸ¥è¯†åº“
- âœ… å“®å–˜çŸ¥è¯†åº“
- âœ… å† å¿ƒç—…çŸ¥è¯†åº“
- âœ… COPDçŸ¥è¯†åº“
- âœ… éª¨å…³èŠ‚ç‚çŸ¥è¯†åº“
- âœ… ç±»é£æ¹¿å…³èŠ‚ç‚çŸ¥è¯†åº“

#### 6. **æ–‡æ¡£å’Œæµ‹è¯•** âœ…
- âœ… README.md - å®Œæ•´é¡¹ç›®è¯´æ˜
- âœ… APIæ–‡æ¡£ - è‡ªåŠ¨ç”Ÿæˆçš„FastAPIæ–‡æ¡£
- âœ… å•å…ƒæµ‹è¯• - æ¨¡å‹å’Œæ•°æ®éªŒè¯æµ‹è¯•
- âœ… é›†æˆæµ‹è¯• - çŸ¥è¯†åº“æ“ä½œæµ‹è¯•

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
cd chronic_disease_kb
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ API å¯†é’¥
```

### 3. åˆå§‹åŒ–çŸ¥è¯†åº“
```bash
python scripts/init_kb.py
```

### 4. å¯åŠ¨æœåŠ¡å™¨
```bash
python scripts/start_server.py
```

### 5. è®¿é—®APIæ–‡æ¡£
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:8000/docs`

## ğŸ“š APIä½¿ç”¨ç¤ºä¾‹

### æŸ¥è¯¢çŸ¥è¯†åº“
```bash
curl -X POST "http://localhost:8000/api/v1/query" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "2å‹ç³–å°¿ç—…çš„æ—©æœŸç—‡çŠ¶æ˜¯ä»€ä¹ˆï¼Ÿ",
    "patient_id": "patient_123",
    "max_results": 5
  }'
```

### åˆ›å»ºæ‚£è€…
```bash
curl -X POST "http://localhost:8000/api/v1/patients" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "age": 55,
    "gender": "male",
    "chronic_conditions": ["diabetes_type2", "hypertension"]
  }'
```

### æ·»åŠ å¥åº·æŒ‡æ ‡
```bash
curl -X POST "http://localhost:8000/api/v1/patients/patient_123/metrics" \
  -H "Content-Type: application/json" \
  -d '{
    "metric_type": "blood_pressure",
    "value": {"systolic": 120, "diastolic": 80},
    "unit": "mmHg",
    "timestamp": "2026-02-04T10:00:00"
  }'
```

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
chronic_disease_kb/
â”œâ”€â”€ agents/              # AIæ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ orchestrator.py  # Agentåè°ƒå™¨
â”œâ”€â”€ api/                 # FastAPIæ¥å£
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py          # åº”ç”¨å…¥å£
â”‚   â””â”€â”€ routes/          # APIè·¯ç”±
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ health.py
â”‚       â”œâ”€â”€ knowledge.py
â”‚       â”œâ”€â”€ patients.py
â”‚       â”œâ”€â”€ query.py
â”‚       â””â”€â”€ recommendations.py
â”œâ”€â”€ core/                # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ data/                # æ•°æ®å’Œç¤ºä¾‹
â”‚   â””â”€â”€ sample_knowledge.py
â”œâ”€â”€ db/                  # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ kb/                  # çŸ¥è¯†åº“æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ vector_store.py  # å‘é‡æ•°æ®åº“
â”‚   â””â”€â”€ knowledge_base.py # çŸ¥è¯†åº“ç®¡ç†
â”œâ”€â”€ models/              # Pydanticæ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ patient.py
â”‚   â”œâ”€â”€ disease.py
â”‚   â”œâ”€â”€ treatment.py
â”‚   â”œâ”€â”€ metric.py
â”‚   â””â”€â”€ query.py
â”œâ”€â”€ scripts/             # å®ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ init_kb.py       # åˆå§‹åŒ–çŸ¥è¯†åº“
â”‚   â””â”€â”€ start_server.py  # å¯åŠ¨æœåŠ¡å™¨
â”œâ”€â”€ tests/               # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_models.py
â”‚   â””â”€â”€ test_kb.py
â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt     # Pythonä¾èµ–
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ pytest.ini           # æµ‹è¯•é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¤– æ™ºèƒ½Agentç³»ç»Ÿ
1. **QueryAgent** - ç†è§£ç”¨æˆ·æŸ¥è¯¢ï¼Œæå–å…³é”®ä¿¡æ¯
2. **RetrievalAgent** - RAGæ£€ç´¢ï¼Œç”Ÿæˆç»¼åˆç­”æ¡ˆ
3. **RecommendationAgent** - åŸºäºæ‚£è€…æ¡£æ¡ˆæä¾›ä¸ªæ€§åŒ–å»ºè®®
4. **Orchestrator** - åè°ƒå¤šä¸ªAgentåä½œ

### ğŸ“Š æ”¯æŒç–¾ç—…ç±»å‹
- **ç³–å°¿ç—…**ï¼š1å‹ã€2å‹ã€å¦Šå¨ ç³–å°¿ç—…
- **é«˜è¡€å‹**ï¼šåŸå‘æ€§ã€ç»§å‘æ€§
- **å¿ƒè„ç—…**ï¼šå† å¿ƒç—…ã€å¿ƒåŠ›è¡°ç«­ã€å¿ƒå¾‹å¤±å¸¸
- **å‘¼å¸ç³»ç»Ÿ**ï¼šå“®å–˜ã€COPD
- **é£æ¹¿å…ç–«**ï¼šéª¨å…³èŠ‚ç‚ã€ç±»é£æ¹¿å…³èŠ‚ç‚

### ğŸ” RAGæ£€ç´¢å¢å¼ºç”Ÿæˆ
- ä½¿ç”¨ChromaDBå‘é‡æ•°æ®åº“
- è¯­ä¹‰åµŒå…¥ï¼ˆSentence-Transformersï¼‰
- æ™ºèƒ½æ–‡æ¡£åˆ†å—
- ç›¸å…³æ€§æ’åº

### ğŸ“ æ‚£è€…ç®¡ç†
- å®Œæ•´çš„æ‚£è€…æ¡£æ¡ˆ
- å¥åº·æŒ‡æ ‡è¿½è¸ªï¼ˆè¡€å‹ã€è¡€ç³–ã€ä½“é‡ç­‰ï¼‰
- ç”¨è¯è®°å½•
- å¥åº·è¶‹åŠ¿åˆ†æ

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.9+** - ç¼–ç¨‹è¯­è¨€
- **FastAPI** - Webæ¡†æ¶
- **ChromaDB** - å‘é‡æ•°æ®åº“
- **Sentence-Transformers** - æ–‡æœ¬åµŒå…¥
- **Pydantic** - æ•°æ®éªŒè¯
- **Uvicorn** - ASGIæœåŠ¡å™¨

## ğŸ” é…ç½®è¯´æ˜

ç¼–è¾‘ `.env` æ–‡ä»¶é…ç½®APIå¯†é’¥ï¼š

```env
# OpenAIï¼ˆç”¨äºAgentçš„æ™ºèƒ½å›å¤ï¼‰
OPENAI_API_KEY=your_openai_key_here

# Anthropic Claudeï¼ˆå¤‡é€‰ï¼‰
ANTHROPIC_API_KEY=your_anthropic_key_here

# Google Geminiï¼ˆå¤‡é€‰ï¼‰
GOOGLE_API_KEY=your_google_key_here

# é»˜è®¤æ¨¡å‹
DEFAULT_LLM_PROVIDER=openai
DEFAULT_MODEL=gpt-3.5-turbo
```

## ğŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_models.py
pytest tests/test_kb.py
```

## ğŸŒŸ ä½¿ç”¨æç¤º

1. **ultraworkæ¨¡å¼** - åœ¨æŸ¥è¯¢æ—¶æ·»åŠ "ultrawork"æˆ–"ulw"å…³é”®è¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
   - ç†è§£å¤æ‚æŸ¥è¯¢
   - æœç´¢ç›¸å…³çŸ¥è¯†
   - ç”Ÿæˆç»¼åˆå›ç­”
   - æä¾›ä¸ªæ€§åŒ–å»ºè®®

2. **æ‚£è€…ä¸Šä¸‹æ–‡** - æä¾› patient_id å¯è·å¾—ï¼š
   - åŸºäºç—…å²çš„ä¸ªæ€§åŒ–å›ç­”
   - é’ˆå¯¹æ€§çš„ç”¨è¯æé†’
   - ç›¸å…³çš„å¥åº·å»ºè®®

3. **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡æŸ¥è¯¢

## ğŸ“ æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦å£°æ˜**ï¼š
- æœ¬ç³»ç»Ÿæä¾›çš„åŒ»ç–—ä¿¡æ¯ä»…ä¾›å‚è€ƒ
- ä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»ç–—è¯Šæ–­å’Œæ²»ç–—å»ºè®®
- å¦‚æœ‰ä¸¥é‡ç—‡çŠ¶ï¼Œè¯·ç«‹å³å°±åŒ»
- ç”¨è¯è°ƒæ•´å¿…é¡»å’¨è¯¢åŒ»ç”Ÿ

## ğŸ‰ é¡¹ç›®å®Œæˆï¼

æ‚¨ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ **Agentæ…¢ç—…ç®¡ç†çŸ¥è¯†åº“ç³»ç»Ÿ**ï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´çš„çŸ¥è¯†åº“ï¼ˆ7ç§æ…¢æ€§ç—…ï¼‰
- âœ… æ™ºèƒ½Agentç³»ç»Ÿï¼ˆ3ä¸ªAgent + Orchestratorï¼‰
- âœ… RESTful APIï¼ˆ15+ ä¸ªç«¯ç‚¹ï¼‰
- âœ… æ‚£è€…ç®¡ç†ç³»ç»Ÿ
- âœ… RAGæ£€ç´¢å¢å¼ºç”Ÿæˆ
- âœ… å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- âœ… è¯¦ç»†æ–‡æ¡£

**ç³»ç»Ÿå·²å°±ç»ªï¼Œå¯ä»¥ç«‹å³å¼€å§‹ä½¿ç”¨ï¼** ğŸš€

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åé¦ˆï¼

---

**åˆ›å»ºæ—¶é—´**: 2026-02-04  
**ç‰ˆæœ¬**: 1.0.0  
**ä½œè€…**: AI Assistant